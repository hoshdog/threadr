<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config Test</title>
</head>
<body>
    <h1>Config Loading Test</h1>
    <div id="output" style="font-family: monospace; white-space: pre;"></div>
    
    <script src="config.js"></script>
    <script>
        const output = document.getElementById('output');
        
        // Test 1: Is config loaded?
        output.innerHTML += `Config loaded: ${typeof config !== 'undefined'}\n\n`;
        
        if (typeof config !== 'undefined') {
            // Test 2: What's the hostname?
            output.innerHTML += `Current hostname: ${window.location.hostname}\n`;
            output.innerHTML += `Full URL: ${window.location.href}\n\n`;
            
            // Test 3: What does config contain?
            output.innerHTML += `Config ENV: ${config.ENV}\n`;
            output.innerHTML += `Config API_URL: ${config.API_URL}\n`;
            output.innerHTML += `Config API_KEY present: ${!!config.API_KEY}\n`;
            output.innerHTML += `Config API_KEY value: ${config.API_KEY ? config.API_KEY.substring(0, 15) + '...' : 'null'}\n\n`;
            
            // Test 4: Hostname checks
            const hostname = window.location.hostname;
            output.innerHTML += `Hostname includes 'vercel.app': ${hostname.includes('vercel.app')}\n`;
            output.innerHTML += `Hostname includes 'threadr.app': ${hostname.includes('threadr.app')}\n`;
            output.innerHTML += `Hostname includes '--': ${hostname.includes('--')}\n\n`;
            
            // Test 5: Direct API key logic test
            const testApiKey = (() => {
                const hostname = window.location.hostname;
                
                // No API key needed in development
                if (hostname === 'localhost' || hostname === '127.0.0.1' || hostname.startsWith('192.168.')) {
                    return null;
                }
                
                // Production API key for ALL Vercel deployments and production domains
                if (hostname.includes('vercel.app') || hostname.includes('threadr.app')) {
                    return 'zfQBge1AsBBLF8nMNxiHdyFn-_fS7vsTtcTrveXnyD8';
                }
                
                // Default production API key
                return 'zfQBge1AsBBLF8nMNxiHdyFn-_fS7vsTtcTrveXnyD8';
            })();
            
            output.innerHTML += `Direct API key test result: ${testApiKey ? testApiKey.substring(0, 15) + '...' : 'null'}\n`;
            output.innerHTML += `Matches config.API_KEY: ${testApiKey === config.API_KEY}\n`;
        } else {
            output.innerHTML += 'ERROR: config.js not loaded!\n';
        }
    </script>
</body>
</html>