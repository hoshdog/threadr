<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bulletproof Logo Test - Vercel Static Assets</title>
    <style>
        body { 
            background: #0f0f0f; 
            color: white; 
            font-family: 'Inter', -apple-system, sans-serif; 
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 24px;
            border: 1px solid #333;
            border-radius: 12px;
            background: #1a1a1a;
        }
        .logo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .logo-test {
            padding: 20px;
            border: 1px solid #444;
            border-radius: 8px;
            background: #222;
            text-align: center;
        }
        .logo-test img {
            max-width: 200px;
            height: auto;
            margin: 10px;
            border: 1px solid #555;
            border-radius: 4px;
            background: rgba(255,255,255,0.05);
            padding: 10px;
        }
        .status {
            margin-top: 10px;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 14px;
        }
        .success {
            background: #10b981;
            color: white;
        }
        .error {
            background: #ef4444;
            color: white;
        }
        .loading {
            background: #f59e0b;
            color: white;
        }
        .info {
            background: #3b82f6;
            color: white;
        }
        h1 {
            color: #fff;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 40px;
        }
        .results {
            margin-top: 20px;
            padding: 16px;
            background: #111;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
        }
        .diagnostic-info {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            color: #aaa;
            margin-top: 10px;
        }
        pre {
            background: #111;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            color: #e5e5e5;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Bulletproof Logo Test</h1>
        <p class="subtitle">Testing Vercel static asset serving after vercel.json configuration fix</p>
        
        <div class="test-section">
            <h2>üñºÔ∏è Visual Logo Loading Test</h2>
            <p>Testing all logo variants with proper error handling and loading states</p>
            
            <div class="logo-grid">
                <div class="logo-test">
                    <h3>Black Logo</h3>
                    <img id="logo-black" src="/logos/threadrLogo_Black.png" alt="Threadr Black Logo" 
                         onload="handleImageLoad('logo-black')" 
                         onerror="handleImageError('logo-black')">
                    <div id="status-logo-black" class="status loading">Loading...</div>
                    <div class="diagnostic-info">Path: /logos/threadrLogo_Black.png</div>
                </div>
                
                <div class="logo-test">
                    <h3>White Logo</h3>
                    <img id="logo-white" src="/logos/threadrLogo_White.png" alt="Threadr White Logo" 
                         onload="handleImageLoad('logo-white')" 
                         onerror="handleImageError('logo-white')">
                    <div id="status-logo-white" class="status loading">Loading...</div>
                    <div class="diagnostic-info">Path: /logos/threadrLogo_White.png</div>
                </div>
                
                <div class="logo-test">
                    <h3>Black Banner</h3>
                    <img id="banner-black" src="/logos/threadrBanner_Black.png" alt="Threadr Black Banner" 
                         onload="handleImageLoad('banner-black')" 
                         onerror="handleImageError('banner-black')">
                    <div id="status-banner-black" class="status loading">Loading...</div>
                    <div class="diagnostic-info">Path: /logos/threadrBanner_Black.png</div>
                </div>
                
                <div class="logo-test">
                    <h3>White Banner</h3>
                    <img id="banner-white" src="/logos/threadrBanner_White.png" alt="Threadr White Banner" 
                         onload="handleImageLoad('banner-white')" 
                         onerror="handleImageError('banner-white')">
                    <div id="status-banner-white" class="status loading">Loading...</div>
                    <div class="diagnostic-info">Path: /logos/threadrBanner_White.png</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>üîç HTTP Response Analysis</h2>
            <p>Checking HTTP status codes and response headers for each logo file</p>
            <div id="http-results" class="results">
                <div class="status loading">Running HTTP tests...</div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>üéõÔ∏è Vercel Configuration Analysis</h2>
            <p>Current vercel.json configuration that should fix the static asset serving:</p>
            <pre><code>{
  "rewrites": [
    {
      "source": "/((?!.*\\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp)).*)",
      "destination": "/index.html"
    }
  ],
  "headers": [
    {
      "source": "/logos/(.*)",
      "headers": [
        { "key": "Content-Type", "value": "image/png" },
        { "key": "Cache-Control", "value": "public, max-age=86400, must-revalidate" }
      ]
    }
  ]
}</code></pre>
            
            <div class="info status" style="margin-top: 16px;">
                <strong>Key Fix:</strong> The regex pattern excludes static file extensions from being rewritten to index.html
            </div>
        </div>
        
        <div class="test-section">
            <h2>üìä Test Summary</h2>
            <div id="test-summary" class="results">
                <div class="status loading">Running all tests...</div>
            </div>
        </div>
    </div>

    <script>
        let testResults = {
            imageLoads: {},
            httpResponses: {},
            totalTests: 8,
            completed: 0
        };

        // Image load handlers
        function handleImageLoad(imageId) {
            testResults.imageLoads[imageId] = 'success';
            document.getElementById('status-' + imageId).className = 'status success';
            document.getElementById('status-' + imageId).textContent = '‚úÖ Loaded Successfully';
            updateTestSummary();
        }

        function handleImageError(imageId) {
            testResults.imageLoads[imageId] = 'error';
            document.getElementById('status-' + imageId).className = 'status error';
            document.getElementById('status-' + imageId).textContent = '‚ùå Failed to Load';
            updateTestSummary();
        }

        // HTTP response tests
        async function runHttpTests() {
            const paths = [
                '/logos/threadrLogo_Black.png',
                '/logos/threadrLogo_White.png', 
                '/logos/threadrBanner_Black.png',
                '/logos/threadrBanner_White.png'
            ];
            
            const results = [];
            
            for (const path of paths) {
                try {
                    const response = await fetch(path, { method: 'HEAD' });
                    const contentType = response.headers.get('content-type');
                    const cacheControl = response.headers.get('cache-control');
                    
                    testResults.httpResponses[path] = {
                        status: response.status,
                        contentType,
                        cacheControl,
                        success: response.ok
                    };
                    
                    results.push(`
                        <div class="diagnostic-info" style="margin: 10px 0; padding: 12px; background: #0a0a0a; border-radius: 6px;">
                            <strong>${path}</strong><br>
                            Status: <span class="${response.ok ? 'success' : 'error'}">${response.status} ${response.statusText}</span><br>
                            Content-Type: ${contentType || 'Not specified'}<br>
                            Cache-Control: ${cacheControl || 'Not specified'}
                        </div>
                    `);
                } catch (error) {
                    testResults.httpResponses[path] = {
                        error: error.message,
                        success: false
                    };
                    
                    results.push(`
                        <div class="diagnostic-info error" style="margin: 10px 0; padding: 12px; border-radius: 6px;">
                            <strong>${path}</strong><br>
                            Error: ${error.message}
                        </div>
                    `);
                }
            }
            
            document.getElementById('http-results').innerHTML = results.join('');
            updateTestSummary();
        }

        function updateTestSummary() {
            const imageSuccesses = Object.values(testResults.imageLoads).filter(r => r === 'success').length;
            const imageErrors = Object.values(testResults.imageLoads).filter(r => r === 'error').length;
            const httpSuccesses = Object.values(testResults.httpResponses).filter(r => r.success).length;
            const httpErrors = Object.values(testResults.httpResponses).filter(r => !r.success).length;
            
            const totalSuccesses = imageSuccesses + httpSuccesses;
            const totalErrors = imageErrors + httpErrors;
            const totalCompleted = totalSuccesses + totalErrors;
            
            let summaryClass = 'loading';
            let summaryText = 'Tests in progress...';
            
            if (totalCompleted === testResults.totalTests) {
                if (totalErrors === 0) {
                    summaryClass = 'success';
                    summaryText = `üéâ All tests passed! (${totalSuccesses}/${testResults.totalTests})`;
                } else {
                    summaryClass = 'error';
                    summaryText = `‚ö†Ô∏è ${totalErrors} tests failed, ${totalSuccesses} passed (${totalCompleted}/${testResults.totalTests})`;
                }
            }
            
            document.getElementById('test-summary').innerHTML = `
                <div class="status ${summaryClass}">${summaryText}</div>
                <div style="margin-top: 16px;">
                    <div>‚úÖ Image Loads: ${imageSuccesses}/4</div>
                    <div>üåê HTTP Responses: ${httpSuccesses}/4</div>
                    <div>‚ùå Total Failures: ${totalErrors}</div>
                </div>
            `;
        }

        // Run HTTP tests when page loads
        document.addEventListener('DOMContentLoaded', () => {
            runHttpTests();
            updateTestSummary();
        });

        // Set timeout for images that might not trigger onload/onerror
        setTimeout(() => {
            const imageIds = ['logo-black', 'logo-white', 'banner-black', 'banner-white'];
            imageIds.forEach(id => {
                if (!testResults.imageLoads[id]) {
                    testResults.imageLoads[id] = 'timeout';
                    document.getElementById('status-' + id).className = 'status error';
                    document.getElementById('status-' + id).textContent = '‚è±Ô∏è Load Timeout';
                }
            });
            updateTestSummary();
        }, 10000);
    </script>
</body>
</html>