<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threadr Debug Test</title>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="config.js"></script>
</head>
<body style="padding: 20px; background: #1a1a1a; color: white; font-family: Arial;">
    <h1>Threadr Frontend Debug Test</h1>
    
    <div x-data="debugData">
        <h2>Logo Loading Test</h2>
        <div style="display: flex; gap: 20px; margin: 20px 0;">
            <div>
                <h3>Black Logo</h3>
                <img src="/logos/threadrLogo_Black.png" alt="Black Logo" style="width: 50px; height: 50px; border: 1px solid white;" 
                     @load="logoStatus.black = 'loaded'" 
                     @error="logoStatus.black = 'error'">
                <p>Status: <span x-text="logoStatus.black"></span></p>
            </div>
            <div>
                <h3>White Logo</h3>
                <img src="/logos/threadrLogo_White.png" alt="White Logo" style="width: 50px; height: 50px; border: 1px solid white;"
                     @load="logoStatus.white = 'loaded'" 
                     @error="logoStatus.white = 'error'">
                <p>Status: <span x-text="logoStatus.white"></span></p>
            </div>
        </div>
        
        <h2>Templates Data Test</h2>
        <p>Templates count: <span x-text="templates.length"></span></p>
        <p>Popular templates count: <span x-text="getPopularTemplates().length"></span></p>
        <p>Filtered templates count: <span x-text="getFilteredTemplates().length"></span></p>
        
        <h3>Template Categories</h3>
        <div x-show="templates.length > 0">
            <template x-for="category in getUniqueCategories()" :key="category">
                <span x-text="category" style="background: #333; padding: 5px; margin: 2px; display: inline-block;"></span>
            </template>
        </div>
        
        <h3>First 3 Templates</h3>
        <div x-show="templates.length > 0">
            <template x-for="(template, index) in templates.slice(0, 3)" :key="template.id">
                <div style="border: 1px solid #333; padding: 10px; margin: 10px 0;">
                    <h4 x-text="template.name"></h4>
                    <p x-text="template.description"></p>
                    <p>Category: <span x-text="template.category"></span> | Pro: <span x-text="template.isPro"></span></p>
                </div>
            </template>
        </div>
        
        <h2>Configuration Test</h2>
        <p>Config loaded: <span x-text="typeof window.config !== 'undefined' ? 'Yes' : 'No'"></span></p>
        <p>API URL: <span x-text="typeof window.config !== 'undefined' ? config.API_URL : 'Not loaded'"></span></p>
        
        <h2>Alpine.js Test</h2>
        <p>Current page: <span x-text="currentPage"></span></p>
        <button @click="currentPage = 'templates'" style="background: #007acc; color: white; padding: 10px; border: none; cursor: pointer;">Switch to Templates</button>
        <button @click="currentPage = 'generate'" style="background: #007acc; color: white; padding: 10px; border: none; cursor: pointer;">Switch to Generate</button>
        
        <div x-show="currentPage === 'templates'" style="background: #2a2a2a; padding: 20px; margin: 20px 0;">
            <h3>Templates Page Content</h3>
            <p>This should show when currentPage === 'templates'</p>
        </div>
    </div>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('debugData', () => ({
                currentPage: 'generate',
                logoStatus: {
                    black: 'loading',
                    white: 'loading'
                },
                templates: [
                    {
                        id: 'test-1',
                        name: 'Test Template 1',
                        description: 'A test template',
                        category: 'Business',
                        isPro: false,
                        popularity: 95
                    },
                    {
                        id: 'test-2',
                        name: 'Test Template 2',
                        description: 'Another test template',
                        category: 'Educational',
                        isPro: true,
                        popularity: 88
                    }
                ],
                
                getPopularTemplates() {
                    return this.templates.filter(t => t.popularity > 90);
                },
                
                getFilteredTemplates() {
                    return this.templates;
                },
                
                getUniqueCategories() {
                    return [...new Set(this.templates.map(t => t.category))];
                }
            }));
        });
        
        // Test logo loading directly
        setTimeout(() => {
            console.log('=== LOGO LOADING TEST ===');
            const blackImg = new Image();
            const whiteImg = new Image();
            
            blackImg.onload = () => console.log('✅ Black logo loaded successfully');
            blackImg.onerror = () => console.log('❌ Black logo failed to load');
            blackImg.src = '/logos/threadrLogo_Black.png';
            
            whiteImg.onload = () => console.log('✅ White logo loaded successfully');
            whiteImg.onerror = () => console.log('❌ White logo failed to load');
            whiteImg.src = '/logos/threadrLogo_White.png';
        }, 1000);
    </script>
</body>
</html>