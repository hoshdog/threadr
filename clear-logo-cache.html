<!DOCTYPE html>
<html>
<head>
    <title>Clear Logo Cache - Threadr</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; }
        .test-box { border: 2px solid #ddd; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .success { border-color: #28a745; background: #f8fff9; }
        .error { border-color: #dc3545; background: #fff8f8; }
        .loading { border-color: #ffc107; background: #fffdf0; }
        img { max-width: 100px; margin: 10px; border: 1px solid #ccc; }
        .cache-buster { font-family: monospace; background: #f5f5f5; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>🔧 Threadr Logo Cache Clear Test</h1>
    
    <div class="test-box loading">
        <h2>Step 1: Clear Browser Cache</h2>
        <p><strong>Instructions:</strong></p>
        <ul>
            <li><strong>Chrome/Edge:</strong> Ctrl+Shift+Delete → Clear "Cached images and files"</li>
            <li><strong>Firefox:</strong> Ctrl+Shift+Delete → Clear "Cache"</li>
            <li><strong>Safari:</strong> Cmd+Option+E</li>
        </ul>
        <p><em>After clearing cache, refresh this page (Ctrl+F5 or Cmd+Shift+R)</em></p>
    </div>

    <div class="test-box" id="logo-test">
        <h2>Step 2: Test Logo Loading</h2>
        <p>These logos should load immediately without showing alt text:</p>
        
        <div style="display: flex; flex-wrap: wrap; gap: 20px;">
            <div>
                <h4>Black Logo</h4>
                <img src="/logos/threadrLogo_Black.png?v=cache-clear-test" 
                     alt="Black Logo" 
                     onload="markSuccess('black')"
                     onerror="markError('black')">
                <div id="black-status">Loading...</div>
            </div>
            
            <div>
                <h4>White Logo</h4>
                <img src="/logos/threadrLogo_White.png?v=cache-clear-test" 
                     alt="White Logo" 
                     onload="markSuccess('white')"
                     onerror="markError('white')">
                <div id="white-status">Loading...</div>
            </div>
        </div>
        
        <div id="test-result" style="margin-top: 20px; font-weight: bold;"></div>
    </div>

    <div class="test-box">
        <h2>Step 3: Cache Buster URLs</h2>
        <p>If logos still don't load, try these direct URLs with cache busters:</p>
        <div class="cache-buster">
            <a href="/logos/threadrLogo_Black.png?v=clear-cache-now" target="_blank">Black Logo (Cache Buster)</a><br>
            <a href="/logos/threadrLogo_White.png?v=clear-cache-now" target="_blank">White Logo (Cache Buster)</a>
        </div>
    </div>

    <div class="test-box">
        <h2>Step 4: Alternative Solutions</h2>
        <ul>
            <li><strong>Incognito/Private Mode:</strong> Test in a private browser window</li>
            <li><strong>Different Browser:</strong> Try Chrome, Firefox, or Safari</li>
            <li><strong>Mobile Device:</strong> Check on your phone/tablet</li>
            <li><strong>Wait 5-10 minutes:</strong> CDN cache may need time to refresh</li>
        </ul>
    </div>

    <script>
        let loadedCount = 0;
        let errorCount = 0;

        function markSuccess(which) {
            loadedCount++;
            document.getElementById(which + '-status').innerHTML = '✅ Loaded Successfully';
            document.getElementById(which + '-status').style.color = '#28a745';
            updateResult();
        }

        function markError(which) {
            errorCount++;
            document.getElementById(which + '-status').innerHTML = '❌ Failed to Load';
            document.getElementById(which + '-status').style.color = '#dc3545';
            updateResult();
        }

        function updateResult() {
            if (loadedCount + errorCount >= 2) {
                const resultDiv = document.getElementById('test-result');
                const testBox = document.getElementById('logo-test');
                
                if (loadedCount === 2) {
                    resultDiv.innerHTML = '🎉 SUCCESS: All logos loaded! The issue was browser cache.';
                    testBox.className = 'test-box success';
                } else {
                    resultDiv.innerHTML = `⚠️ PARTIAL: ${loadedCount}/2 logos loaded. Try cache clearing steps above.`;
                    testBox.className = 'test-box error';
                }
            }
        }

        // Auto-timeout after 3 seconds
        setTimeout(() => {
            if (loadedCount + errorCount < 2) {
                const missing = 2 - (loadedCount + errorCount);
                for (let i = 0; i < missing; i++) {
                    errorCount++;
                }
                updateResult();
            }
        }, 3000);
    </script>
</body>
</html>